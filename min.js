var bparser=function(){"use strict";function r(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(r)))return;var t=[],e=!0,o=!1,u=void 0;try{for(var a,i=r[Symbol.iterator]();!(e=(a=i.next()).done)&&(t.push(a.value),!n||t.length!==n);e=!0);}catch(r){o=!0,u=r}finally{try{e||null==i.return||i.return()}finally{if(o)throw u}}return t}(r,n)||t(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(r,n){if(r){if("string"==typeof r)return e(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?e(r,n):void 0}}function e(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=new Array(n);t<n;t++)e[t]=r[t];return e}var o=function(r){return Array.isArray(r)?r:[r]},u=function(r,t,e){var u=o(t),a=o(e);return 0===u.length||0===a.length?u.concat(a):u.reduce((function(r,t){return r.push.apply(r,n(a.map((function(r){return r+","+t})))),r}),[])},a=function(r){return r.toString(16)},i=function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return t.reduce((function(r,n){return u(0,r,n)}),[])},c=function(r,n){return r.replace(/(&|\|)/g,",").split(",").every(n.get)},f=function(r,n,t){var e=function(r){return function(n){for(var t,e=!1;t=n.match(/\([^\(]+?\)/g);){for(var o=0,u=t.length;o<u;o++){var a=t[o],i=a.substr(1,a.length-2);if(!(e=c(i,r)))break;n=n.replace(a,r.add(i,"$"))}if(!e)break}return!(!e||!c(n,r))&&n}}(t)("("+function(r){return function(n,t){return n.replace(t,(function(n){return r.add(n,"#")}))}}(t)(r,n).replace(/\s/g,"").replace(/AND/g,"&").replace(/OR/g,"|")+")");return e||!1},l=function(r,n){return-1!==r.indexOf(n)};return function(t,e){var o,u=function(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=0,e={};return{add:function(o,u){return r=u+n(++t),e[r]=o,r},get:function(r){return e[r]}}}(),c=f(t,e,u);return{isValid:!!c,results:c?(o=[]).concat.apply(o,n(function t(e){var o=r(["|","&"].map((function(r){return l(e,r)})),2),a=o[0],c=o[1],f=!l(e,"$"),p=a?e.split("|"):e;return f?p:a?e.split("|").map(t):c?i.apply(void 0,[e].concat(n(e.split("&").map(t)))):t(u.get(e))}(c))).map((function(r){return(n=r.replace(/&/g,",").split(",")).sort(),n;var n})).map((function(r){return r.map((function(r){return u.get(r)}))})).map((function(r){return n(new Set(r))})):[]}}}();
